import './polyfills.server.mjs';
import{$ as et,D as b,F as Y,H as F,I as O,J as P,K as L,L as $,M as V,N as q,O as J,R as G,V as D,W as X,Y as T,Z,_ as tt,a as W,b as H,c as p,d as z,e as j,f as K,g as d,h as u,i as g,j as R,k as l,l as I,m as A,n as s,o,p as x,q as Q,r as M,s as h,t as c,u as B,v as y,w as _,x as N}from"./chunk-ENFTWREL.mjs";var C=(()=>{class i{constructor(t){this.HttpClient=t,this.userid="",this.userkey=0,this.userLastName=""}setUserId(t){this.userid=t}getLoggedInUserKey(){return this.userkey}getUserLastName(){return this.userLastName}getUserKey(){return this.userkey}getUserId(){return this.userid}createDateFromMonth(t,e){return new Date(t,e-1,1)}formatDateYYYYMMDD(t){return t.toISOString().slice(0,10)}getForMonth(t){let e="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_prod_/getPhysicsMonthlyDuties.php?MonthNum="+t;return b()&&(e="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_dev_/getPhysicsMonthlyDuties.php?debug=1&MonthNum="+t),console.log("30303 url %o",e),this.HttpClient.get(e)}getFromPhysicsDuty(t){var e=new Date().getMonth();let n="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_prod_/getPhysicsDuties.php";return b()?(n="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_dev_/getPhysicsDuties.php?debug=1",+e+ +t>6&&(n+="&newDuties=1")):+e+ +t>6&&(n+="?newDuties=1"),console.log("3939  url for getFromPhysicsDuty %o",n),this.HttpClient.get(n)}takeAssignment(t){let e="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_prod_/takeDuty.php?idx="+t+"&userkey="+this.userkey+"+&debug=1";return b()&&(e="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_dev_/takeDuty.php?idx="+t+"&userkey="+this.userkey+"+&debug=1"),console.log("464646  url %o",e),this.HttpClient.get(e)}setLoggedInUserKey(){let t="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_prod_/getLoggedInUserKey.php?userid="+this.userid;b()&&(t="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_dev_/getLoggedInUserKey.php?userid="+this.userid+"&debug=1"),this.HttpClient.get(t).subscribe(e=>{let n=e;this.userkey=e.userkey,this.userLastName=e.lastName,console.log("595959  userkey %o  --- %o",this.userkey,this.userLastName)})}getMyduties(t){let e=new Date().toISOString().slice(0,10)}getForMyDuties(t,e){let n="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_prod_/getMyDuties.php?Start="+t+"&userkey="+this.userkey;return b()&&(n="https://whiteboard.partners.org/esb/FLwbe/APhysicsCov2025/_dev_/getMyDuties.php?debug=1&Start="+t+"&userkey="+this.userkey),console.log("100100 getMyDuties url %o",n),this.HttpClient.get(n)}static{this.\u0275fac=function(e){return new(e||i)(H(L))}}static{this.\u0275prov=W({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var lt=i=>["/Month",i],mt=i=>["/Myduties",i],ut=i=>["/Timeaway",i],it=(()=>{class i{constructor(t,e,n){this.route=t,this.router=e,this.myservice=n,this.title="PhysicsCoverage",this.id="",this.loggedInUserKey=0}ngOnInit(){this.route.queryParams.subscribe(t=>{this.id=t.userid,console.log("2525 userid %o",t),this.id?(this.myservice.setUserId(this.id),this.myservice.setLoggedInUserKey()):this.id=this.myservice.getUserId()}),this.id}hasId(){return this.id?!0:(this.id=this.myservice.getUserId())?(this.id=this.myservice.getUserId(),!0):!1}goHome(){window.open("https://ion.mgh.harvard.edu/cgi-bin/main.pl?userid="+this.id,"_self")}static{this.\u0275fac=function(e){return new(e||i)(u(D),u(T),u(C))}}static{this.\u0275cmp=p({type:i,selectors:[["app-root"]],hostVars:1,hostBindings:function(e,n){e&2&&R("ngSkipHydration",!0)},standalone:!0,features:[_],decls:10,vars:9,consts:[[1,"tab"],[3,"routerLink"],[3,"click"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"button",1),c(2,"Month Cal"),o(),s(3,"button",1),c(4,"My Duties"),o(),s(5,"button",1),c(6,"Timeaway"),o(),s(7,"button",2),M("click",function(){return n.goHome()}),c(8,"Whiteboard Home"),o()(),x(9,"router-outlet")),e&2&&(d(),l("routerLink",N(3,lt,n.id)),d(2),l("routerLink",N(5,mt,n.id)),d(2),l("routerLink",N(7,ut,n.id)))},dependencies:[P,X,et,Z],styles:[".tab[_ngcontent-%COMP%]{overflow:hidden;border:1px solid #ccc;background-color:#f1f1f1}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:inherit;float:left;border:none;outline:none;cursor:pointer;padding:14px 16px;transition:.3s;font-size:.8em}.tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ddd}.tab[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ccc}.tabcontent[_ngcontent-%COMP%]{display:none;padding:6px 12px;border:1px solid #ccc;border-top:none}"]})}}return i})();function gt(i,r){if(i&1&&(s(0,"td"),c(1),o()),i&2){let t=h().index,e=h(2);I("background",e.legendColors[e.dutyNames[t].Idx]),d(),y(" ",e.dutyNames[t].name," ")}}function ft(i,r){if(i&1&&(s(0,"td"),c(1),o()),i&2){let t=h().index,e=h(2);I("background",e.legendColors[e.dutyNames[t].Idx]),d(),y(" ",e.dutyNames[t].timeSpan," ")}}function yt(i,r){if(i&1&&(s(0,"tr"),g(1,gt,2,3,"td",11)(2,ft,2,3,"td",11),o()),i&2){let t=r.index,e=h(2);d(),l("ngIf",e.dutyNames[t]),d(),l("ngIf",e.dutyNames[t])}}function _t(i,r){if(i&1&&(s(0,"table",10),g(1,yt,3,2,"tr",9),o()),i&2){let t=h();d(),l("ngForOf",t.dutyNames)}}function Ct(i,r){if(i&1&&(s(0,"td",16),c(1),o()),i&2){let t=h().index,e=h().index,n=h().index,a=h();A(a.doesLoggedInUserHaveThis(a.theMonth.datesWithDuties[e+n*5][t])),I("background",a.legendColors[a.theMonth.datesWithDuties[e+n*5][t].serviceid]),d(),y(" ",a.getLastName(a.theMonth.datesWithDuties[e+n*5][t])," ")}}function vt(i,r){if(i&1){let t=Q();s(0,"td",17)(1,"button",18),M("click",function(){z(t);let n=h().index,a=h().index,f=h().index,m=h();return j(m.takeDuty(m.theMonth.datesWithDuties[a+f*5][n],a+f*5,n))}),o()()}}function xt(i,r){if(i&1&&(s(0,"tr"),g(1,Ct,2,5,"td",14)(2,vt,2,0,"td",15),o()),i&2){let t=r.index,e=h().index,n=h().index,a=h();d(),l("ngIf",a.theMonth.datesWithDuties[e+n*5]&&a.theMonth.datesWithDuties[e+n*5][t]),d(),l("ngIf",a.hasAssignments(a.theMonth.datesWithDuties[e+n*5][t])&&a.isAssigned(a.theMonth.datesWithDuties[e+n*5][t]))}}function Mt(i,r){if(i&1&&(s(0,"td"),c(1),s(2,"table",13),g(3,xt,3,2,"tr",9),o()()),i&2){let t=r.$implicit,e=h().index,n=h();A(n.isToday(n.theMonth.monthNum,t)),d(),y("",t," "),d(2),l("ngForOf",n.theMonth.datesWithDuties[e])}}function bt(i,r){if(i&1&&(s(0,"tr"),g(1,Mt,4,4,"td",12),o()),i&2){let t=r.index,e=h();d(),l("ngForOf",e.theMonth.weekDays[t])}}var E=(()=>{class i{constructor(t,e,n){this.route=t,this.myservice=e,this.http=n,this.duties=[0,1,2,3,4,5,6],this.dutyNames=[],this.id="",this.advance=0,this.numRows=5,this.monthShownName="",this.forSQLmonthString="",this.monthStringForSQL="",this.dayBucket=[],this.numAssignments=0,this.gotData=!1,this.takers=[],this.isCheckedBool=!1,this.legendColors={10:"#FFE4C4",20:"#b3ffec",21:"yellow",22:"#ffa366",25:"#e6ccff",28:"#FFE4C4",29:"#b3ffec",30:"yellow",31:"#ffa366",32:"#e6ccff",33:"#99ff99",34:"#cccc00"},this.forSQLmonthString=new Date().toISOString().slice(0,7),this.theMonth=new S(0)}ngOnInit(){this.getDuties(),this.getDutyNames()}getColor(t){return this.legendColors[t]}addDutiesToDays(){let t=0;this.theMonth.weekDayForDuties.forEach(e=>{e.forEach(n=>{if(this.dayBucket[n])this.theMonth.datesWithDuties[t++]=this.dayBucket[n];else{let a=[0,0,0,0,0];this.theMonth.monthNum>6&&(a=[0,0,0,0,0,0,0]),this.theMonth.datesWithDuties[t++]=a}})})}getDutyNames(){this.myservice.getFromPhysicsDuty(this.advance).subscribe(t=>{this.dutyNames=t;var e=[];this.theMonth.monthSQLstring=="2025-07"&&(console.log("858585 %o == %o",this.dutyNames,this.theMonth.monthSQLstring),e.push(this.dutyNames[1]),e.push(this.dutyNames[0]),e.push(this.dutyNames[2]),e.push(this.dutyNames[3]),e.push(this.dutyNames[4])),this.dutyNames=e})}getDuties(){let t=new Date().toISOString().slice(0,7);this.dayBucket=[];let e=new Date,a=new Date(e.getFullYear(),e.getMonth()+this.advance,1).toISOString().slice(0,7);this.myservice.getForMonth(a).subscribe(f=>{this.theDuties=f,this.numAssignments=this.theDuties.length;for(let m=0;m<this.theDuties.length;m++)if(this.theDuties[m]){this.takers[this.theDuties[m].UserKey]=1;let v=this.theDuties[m].day.date.slice(0,10);this.dayBucket[v]||(this.dayBucket[v]=[]),this.dayBucket[v].push(this.theDuties[m])}this.addDutiesToDays(),this.gotData=!0})}isUserTaker(){return this.myservice.getLoggedInUserKey()in this.takers}advanceMonth(t){this.advance+=t,this.theMonth=new S(this.advance),this.myservice.getFromPhysicsDuty(this.advance).subscribe(e=>{this.dutyNames=e,console.log("125125 %o",this.dutyNames)}),this.getDuties(),this.addDutiesToDays(),this.myservice.getFromPhysicsDuty(this.advance)}makeMonth(t){this.advance=t;let e=new Date,a=new Date(e.getFullYear(),e.getMonth()+t,1).toISOString().slice(0,7);this.myservice.getForMonth(a).subscribe(f=>{this.theDuties=f,this.theMonth=new S(this.advance)})}hasAssignments(t){return!!this.isUserTaker()}isAssigned(t){return!!(t&&t.userkey>0)}getColorFromServiceid(t){return t?this.legendColors[t.serviceid]:"green"}getLastName(t){if(t)return t.UserKey>0?t.LastName:""}takeDuty(t,e,n){let a="";for(let m=0;m<this.dutyNames.length;m++)if(this.dutyNames[m]&&(console.log("143143 %o -- %o",this.dutyNames[m].Idx,t.serviceid),this.dutyNames[m].Idx==t.serviceid)){let v=t.day.date.slice(0,10);a="You are assuming "+this.dutyNames[m].name+" on "+v}window.confirm(a)&&(this.theMonth.datesWithDuties[e][n].LastName=this.myservice.getUserLastName(),this.gotData=!1,this.myservice.takeAssignment(t.idx).subscribe(m=>{let v=m})),this.isCheckedBool=!1}doesLoggedInUserHaveThis(t){let e=this.myservice.getLoggedInUserKey(),n=0;return t&&(n=t.UserKey),t&&t.phys2&&(n=t.phys2),n==this.myservice.getLoggedInUserKey()?"takee":"normal"}isChecked(){return!1}confirmAction(){let t=window.confirm("Are you sure you want to proceed?");console.log(t?"Action confirmed!":"Action cancelled.")}isToday(t,e){let n=e,a=new Date,f=a.getDate(),m=a.getMonth();return e==f&&t==m?"today":"notToday"}static{this.\u0275fac=function(e){return new(e||i)(u(D),u(C),u(L))}}static{this.\u0275cmp=p({type:i,selectors:[["app-month-cal"]],hostAttrs:["ngSkipHydration","true"],decls:26,vars:3,consts:[[2,"margin-left","50px"],["colspan","1"],["src","assets/prevMonthArrow.png",1,"images",3,"click"],[2,"text-align","center","font-size","large"],["colspan","2"],["class","legend",4,"ngIf"],["colspan","1",2,"text-align","right"],["src","assets/nextMonthArrow.png",1,"images",3,"click"],["colspan","5",2,"font-size","20px","text-align","center"],[4,"ngFor","ngForOf"],[1,"legend"],[3,"background",4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[1,"duties"],["colspan","3",3,"background","class",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["colspan","3"],[2,"text-align","center"],["title","Take the Duty",3,"click"]],template:function(e,n){e&1&&(s(0,"tbody")(1,"div",0)(2,"table")(3,"tr")(4,"th",1)(5,"img",2),M("click",function(){return n.advanceMonth(-1)}),o()(),s(6,"th",3),c(7),o(),s(8,"th",4),g(9,_t,2,1,"table",5),o(),s(10,"th",6)(11,"img",7),M("click",function(){return n.advanceMonth(1)}),o()()(),s(12,"tr"),x(13,"td",8),o(),s(14,"tr")(15,"td"),c(16,"Monday"),o(),s(17,"td"),c(18,"Tuesday"),o(),s(19,"td"),c(20,"Wednesday"),o(),s(21,"td"),c(22,"Thursday"),o(),s(23,"td"),c(24,"Friday"),o()(),g(25,bt,2,1,"tr",9),o()()()),e&2&&(d(7),B(n.theMonth.monthName),d(2),l("ngIf",n.dutyNames),d(16),l("ngForOf",n.theMonth.weeks))},dependencies:[F,O],styles:["body[_ngcontent-%COMP%]{transform:scale(.9);transform-origin:0 0}h4[_ngcontent-%COMP%]{font-size:small;color:red}table[_ngcontent-%COMP%]{width:800px;table-layout:fixed;font-size:.7em}table.legend[_ngcontent-%COMP%]{font-size:.8em;border:solid;width:300px}table.duties[_ngcontent-%COMP%]{font-size:.8em;background-color:#efe7e7;width:100%}square-button[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#add8e6;border:none;border-radius:2px;cursor:pointer}.square-button[_ngcontent-%COMP%]:hover{background-color:#00008b;font-size:3px}.takee[_ngcontent-%COMP%]{color:red;font-weight:700;font-size:larger}.normal[_ngcontent-%COMP%]{color:#00f}.duties[_ngcontent-%COMP%]{border:solid}.today[_ngcontent-%COMP%]{color:#d44e19;font-weight:700;font-size:larger}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{height:20px}button[_ngcontent-%COMP%]{width:5px;height:5px}"]})}}return i})(),S=class{constructor(r){this.dayNum=0,this.focusDate=new Date,this.weeks=[],this.weekDays=[],this.weekNum=0,this.monthName="",this.monthNum=0,this.monthSQLstring="",this.weekDayForDuties=[],this.datesWithDuties=[];let t=["January","February","March","April","May","June","July","August","September","October","November","December"];this.focusDate=new Date(this.focusDate.getFullYear(),this.focusDate.getMonth()+r,1),this.monthSQLstring=this.focusDate.toISOString().slice(0,7),this.monthNum=this.focusDate.getMonth(),this.monthName=t[this.monthNum],this.focusDate=this.moveToMonday(this.focusDate);for(let e=0;e<5;e++)this.weeks[e]=this.makeNormalWeek(this.focusDate)}moveToMonday(r){let t=r.getDay();return t==0&&r.setDate(r.getDate()+1),t==6&&r.setDate(r.getDate()+2),t>0&&t<6&&r.setDate(r.getDate()-(t-1)),r}makeNormalWeek(r){let t=[];this.weekDays[this.weekNum]=[];for(let e=0;e<5;e++)t[e]=new Date(r),this.weekDays[this.weekNum][e]=t[e].getDate(),e==0&&(this.weekDayForDuties[this.weekNum]=[],this.weekDayForDuties[this.weekNum][e]=[]),this.weekDayForDuties[this.weekNum][e]=new Date(t[e]).toISOString().slice(0,10),r.setDate(r.getDate()+1);return this.focusDate=new Date(this.focusDate.getFullYear(),this.focusDate.getMonth(),this.focusDate.getDate()+2),this.weekNum++,t}getMonthSQLstring(){return this.monthSQLstring}doesDateHaveDuties(r){if(r.userkey)return!0}};var nt=(()=>{class i{constructor(t){this.myservice=t,this.id="",this.id=this.myservice.getUserId(),console.log("WeekCalComponent ID: ",this.id)}static{this.\u0275fac=function(e){return new(e||i)(u(C))}}static{this.\u0275cmp=p({type:i,selectors:[["app-week-cal"]],standalone:!0,features:[_],decls:2,vars:0,template:function(e,n){e&1&&(s(0,"p"),c(1,"week-cal works!"),o())}})}}return i})();var ot=(()=>{class i{constructor(t,e,n){this.route=t,this.sanitizer=e,this.myservice=n,this.id="",this.url=null}ngOnInit(){this.route.params.subscribe(t=>{this.id=t.id,this.id.length===0&&(this.id=this.myservice.getUserId());let e="https://whiteboard.partners.org/esb/FLwbe/vacation/vacmanWU.php?userid="+this.id+"&vidx=0&first=vM&func=0";this.sanitizeURL(e),console.log("2222 TimeawayComponent ID: ",this.id)})}sanitizeURL(t){this.url=this.sanitizer.bypassSecurityTrustResourceUrl(t)}static{this.\u0275fac=function(e){return new(e||i)(u(D),u(q),u(C))}}static{this.\u0275cmp=p({type:i,selectors:[["app-timeaway"]],standalone:!0,features:[_],decls:2,vars:1,consts:[[1,"container"],["scrolling","no","id","myIframe","name","myIframe",1,"myIframe",2,"border","0px none","height","1259px","width","1926px",3,"src"]],template:function(e,n){e&1&&(s(0,"div",0),x(1,"iframe",1),o()),e&2&&(d(),l("src",n.url,K))},styles:[".container[_ngcontent-%COMP%]{position:relative;overflow:hidden;left:0 border:solid 1px #e92c2c}.my-iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 2px #181616;background-color:pink}"]})}}return i})();function Dt(i,r){if(i&1&&(s(0,"td"),c(1),o()),i&2){let t=h().$implicit,e=h();d(),y(" ",e.getDateString(t.day),"")}}function wt(i,r){if(i&1&&(s(0,"td"),c(1),o()),i&2){let t=h().$implicit;d(),y(" ",t.name,"")}}function kt(i,r){if(i&1&&(s(0,"td"),c(1),o()),i&2){let t=h().$implicit;d(),y(" ",t.timeSpan," ")}}function St(i,r){if(i&1&&(s(0,"tr"),g(1,Dt,2,1,"td",3)(2,wt,2,1,"td",3)(3,kt,2,1,"td",3),o()),i&2){let t=r.$implicit;d(),l("ngIf",t),d(),l("ngIf",t),d(),l("ngIf",t)}}var st=(()=>{class i{constructor(t){this.myservice=t,this.userkey=0,this.userLastName="",this.userLastName=this.myservice.getUserLastName();let e=new Date().toISOString().slice(0,10);this.myservice.getForMyDuties(e,this.myservice.getLoggedInUserKey()).subscribe(n=>{this.duties=n})}getDateString(t){return t.date.slice(0,10)}getUser(){return this.userkey}getLastName(){return this.myservice.getUserLastName()}getLastDayOfNextMonth(){let t=new Date,e=t.getFullYear(),n=t.getMonth()+2;n>11&&(n=n%12,e+=1);let a=new Date(e,n,1);return new Date(a.getTime()-1*24*60*60*1e3).toISOString().slice(0,10)}static{this.\u0275fac=function(e){return new(e||i)(u(C))}}static{this.\u0275cmp=p({type:i,selectors:[["app-myduties"]],standalone:!0,features:[_],decls:14,vars:2,consts:[[1,"main"],["id","duties"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,n){e&1&&(s(0,"tbody")(1,"div",0)(2,"h4"),c(3),o()(),s(4,"div",0)(5,"table",1)(6,"tr")(7,"th"),c(8,"Date"),o(),s(9,"th"),c(10,"Duty"),o(),s(11,"th"),c(12,"Time Span"),o()(),g(13,St,4,3,"tr",2),o()()()),e&2&&(d(3),y("Future Duties for ",n.getLastName(),""),d(10),l("ngForOf",n.duties))},dependencies:[P,F,O],styles:["table[_ngcontent-%COMP%]{border:1px solid black;table-layout:fixed;width:200px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;width:100px;overflow:hidden}h4[_ngcontent-%COMP%]{font-size:large;font-weight:700}.main[_ngcontent-%COMP%]{margin-left:200px}#duties[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif;font-size:smaller;border-collapse:collapse;width:700px}#duties[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #duties[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}#duties[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}#duties[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#duties[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:left;background-color:#55acdb;color:#fff}"]})}}return i})();var rt=(()=>{class i{constructor(t){this.router=t,window.open("https://ion.mgh.harvard.edu/cgi-bin/main.pl?userid=fjl3","_self")}static{this.\u0275fac=function(e){return new(e||i)(u(T))}}static{this.\u0275cmp=p({type:i,selectors:[["app-whiteboard"]],standalone:!0,features:[_],decls:2,vars:0,template:function(e,n){e&1&&(s(0,"p"),c(1,"whiteboard works!"),o())}})}}return i})();var at=[{path:"",component:E},{path:"Week/:id",component:nt},{path:"Month/:id",component:E},{path:"Timeaway/:id",component:ot},{path:"Myduties/:id",component:st},{path:"Whiteboard/:id",component:rt},{path:"*",component:E}];var dt={providers:[tt(at),J(),$()]};var It={providers:[G()]},ct=Y(dt,It);var Nt=()=>V(it,ct),se=Nt;export{se as a};
